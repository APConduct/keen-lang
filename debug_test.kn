// Debug test for the specific failing complex pipeline case

// This is the exact line that was failing in test_pipelines.kn
complex_pipeline = |value| value
    |> |x| x > 50 ? x * 2 : x / 2
    |> |x| x + 10
    |> |x| x < 100 ? x : 100

// Let's break it down step by step to find the issue

// Step 1: Simple lambda with ternary
step1 = |x| x > 50 ? x * 2 : x / 2

// Step 2: Pipeline with one lambda containing ternary
step2 = 60 |> |x| x > 50 ? x * 2 : x / 2

// Step 3: Lambda that takes a value and applies another lambda
step3 = |value| value |> |x| x > 50 ? x * 2 : x / 2

// Step 4: Add one more pipeline step
step4 = |value| value
    |> |x| x > 50 ? x * 2 : x / 2
    |> |x| x + 10

// Step 5: Full complex pipeline (the failing one)
step5 = |value| value
    |> |x| x > 50 ? x * 2 : x / 2
    |> |x| x + 10
    |> |x| x < 100 ? x : 100

// Simple test function
main() = {
    result = step2
    result
}
