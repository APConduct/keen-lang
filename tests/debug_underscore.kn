// Test underscore parameter parsing to isolate the issue

// Helper functions
process_data(x, y) = x + y
transform_data(a, b, c) = a + b + c

// Test simple underscore in function calls
test_simple_underscore() = {
    data = 10
    result = process_data(5, _)
    result
}

// Test underscore in pipeline
test_underscore_pipeline() = {
    data = 20
    result = data |> process_data(5, _)
    result
}

// Test underscore in case expression
test_case_with_underscore(x) = {
    case x {
        1 -> process_data(x, _)
        2 -> transform_data(x, _, 10)
        _ -> process_data(0, _)
    }
}

// Test underscore in method chaining
test_underscore_chaining() = {
    data = 15
    result = data
        .process_data(5, _)
        .transform_data(_, 10, 20)
    result
}

// Main function
main() = {
    result1 = test_simple_underscore()
    result2 = test_underscore_pipeline()
    result3 = test_case_with_underscore(1)
    result4 = test_underscore_chaining()
    42
}
