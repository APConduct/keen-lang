// Test function returning User type with field access
// This isolates the specific issue that might be causing verifier errors

// Simple product type
type User = User(id: Int, name: String)

// Test functions that return User types
create_user(): User = {
    User(id: 1, name: "Alice")
}

// Function that takes User and returns User (like update_user_name)
copy_user(user: User): User = {
    User(id: 1, name: "Bob")  // Simple version without field access
}

// Function that uses field access and returns User (this might cause the error)
update_user_with_field_access(user: User): User = {
    User(id: user.id, name: "Updated")
}

// Function with live parameter returning User
update_user_live(live user: User): User = {
    User(id: 2, name: "Live")
}

// Function with live parameter AND field access returning User
update_user_live_with_field(live user: User): User = {
    User(id: user.id, name: "LiveField")
}

// Main function to test each case
main(): Int = {
    // Test 1: Create user
    user1 = create_user()

    // Test 2: Copy user without field access
    user2 = copy_user(user1)

    // Test 3: Update with field access (this might fail)
    user3 = update_user_with_field_access(user1)

    // Test 4: Update with live parameter
    user4 = update_user_live(user1)

    // Test 5: Update with live and field access
    user5 = update_user_live_with_field(user1)

    // Return success
    42
}
