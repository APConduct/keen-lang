// Test string interpolation parsing to isolate the issue

// Simple string interpolation
test_simple_interpolation() = {
    name = "World"
    message = "Hello, {name}!"
    message
}

// String interpolation with field access
test_field_interpolation() = {
    user = "test_user"
    message = "User: {user}"
    message
}

// String interpolation in case expression
test_case_with_interpolation(x) = {
    case x {
        1 -> "Value is {x}"
        2 -> "Number: {x}"
        _ -> "Other: {x}"
    }
}

// Test complex interpolation like in the failing case
test_complex_interpolation() = {
    request = "GET"
    path = "/home"

    case request {
        "GET" -> "Successfully processed GET to {path}"
        "POST" -> "Successfully processed POST to {path}"
        _ -> "Unknown method: {request}"
    }
}

// Main function
main() = {
    result1 = test_simple_interpolation()
    result2 = test_field_interpolation()
    result3 = test_case_with_interpolation(1)
    result4 = test_complex_interpolation()
    42
}
